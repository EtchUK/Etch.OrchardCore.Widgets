{% assign linkUrl = Model.ContentItem.Content.LinkDestinationPart.DestinationURL.Text %}
{% assign openIn = Model.ContentItem.Content.LinkBehaviourPart.OpenIn.Text %}
{% assign isModal = openIn == 'modal' or openIn == 'modal-wide' %}

{% assign text = Model.ContentItem.Content.Link.Text.Text %}
{% assign cssClasses = '' %}

{% assign onClickEvent = Model.ContentItem.Content.LinkBehaviourPart.ClickEvent.Value %}

{% comment %} "Style" field is obsolete but remains for backwards compatibility {% endcomment %}
{% assign oldStyle = Model.ContentItem.Content.Link.Style.Text %}

{% if Model.ContentItem.Content.LinkVisualPart.Style.Text %}
    {% assign style = Model.ContentItem.Content.LinkVisualPart.Style.Text %}
{% endif %}

{% if oldStyle != null and oldStyle != 'default' %}
    {% assign cssClasses = 'btn ' | append: style %}
{% endif %}

{% if isModal %}
    {% assign cssClasses = cssClasses | append: ' js-iframe-modal' %}
{% endif %}

<a href="{{ linkUrl | liquid }}"
 {% if openIn != null and isModal == false %}
  target="{{ openIn }}"
 {% elsif isModal %}
  data-iframe="true"
 {% endif %}
 {% if openIn == 'modal-wide' %}
  data-wide="true"
 {% endif %} 
  class="{{ cssClasses }} {{ Model.ContentItem | animation_css }}" 
  style="{{ Model.ContentItem | animation_styles }}"
 {{ Model.ContentItem | animation_data_attributes }} 
 {% if onClickEvent != blank %}
  onClick="{{ onClickEvent }}" 
 {% endif %}>
   <span>{{ text }}</span>
</a>
