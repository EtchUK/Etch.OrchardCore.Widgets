{% assign image = Model.Content.ResponsiveImage-Image %}

{% assign linkUrl = Model.ContentItem.Content.ResponsiveImage.LinkTo.Text %}

{% if Model.ContentItem.Content.LinkDestinationPart.DestinationUrl.Text != blank %}
    {% assign linkUrl = Model.ContentItem.Content.LinkDestinationPart.DestinationUrl.Text %}
{% endif %}

{% assign openIn = Model.ContentItem.Content.LinkBehaviourPart.OpenIn.Text %}
{% assign isModal = openIn == 'modal' or openIn == 'modal-wide' %}
{% assign onClickEvent = Model.ContentItem.Content.LinkBehaviourPart.ClickEvent.Value %}

{% if isModal %}
    {% assign cssClasses = cssClasses | append: ' js-iframe-modal' %}
{% endif %}

{% if linkUrl != blank %}

    <a href="{{ linkUrl }}"
    {% if openIn != null and isModal == false %} target="{{ openIn }}" {% endif %}
    {% if isModal %} data-iframe="true" {% endif %}
    {% if openIn == 'modal-wide' %} data-wide="true" {% endif %}    
    class="image image--link image--responsive {{ Model.ContentItem | animation_css }}"
    style="{{ Model.ContentItem | animation_styles }}" 
    {{ Model.ContentItem | animation_data_attributes }}
    {% if onClickEvent != blank %} onClick="{{ onClickEvent }}" {% endif %}>
        {{ image | shape_render }}
    </a>

{% else %}

    <span class="image image--responsive {{ Model.ContentItem | animation_css }}" 
    style="{{ Model.ContentItem | animation_styles }}" 
    {{ Model.ContentItem | animation_data_attributes }}>
        {{ image | shape_render }}
    </span>

{% endif %}
